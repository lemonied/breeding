import{_ as L}from"./bg-08db9a08.js";import{j as w,G as z,A as x,H as v,s as M,u as T,r as d,o,c as _,e as g,f as m,b as n,B as h,I as b,F as C,h as H,t as I,E as A,a as B,J as R,p as E,i as Y}from"./index-3b786813.js";import{h as j}from"./moment-fbc5633a.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";const N=r=>(E("data-v-93f08c39"),r=r(),Y(),r),V={class:"search-list"},$=N(()=>n("img",{class:"bg",src:L},null,-1)),q={class:"con"},F={class:"list"},O={class:"tit"},U=["href","innerHTML"],G=["innerHTML"],J=["innerHTML"],P={class:"date"},K={class:"page"},Q=w({__name:"SearchList",setup(r){const f=z(),c=x(()=>String(f.query.keywords||"")),e=v({loading:!1,page:1,size:10,total:0,list:[]}),u=async()=>{e.loading=!0;try{const s=await B.post("/ngapi/article/searchArticle",{subjectIdent:"",titleOrContent:c.value,orderType:0,page:e.page,pageSize:e.size});e.total=s.data.data.records,e.list=(s.data.data.rows||[]).map(a=>{var l,p;return{...a,title:(l=a.title)==null?void 0:l.replace(new RegExp(c.value,"g"),i=>`<span class="red">${i}</span>`),articleAbstract:(p=a.articleAbstract)==null?void 0:p.replace(new RegExp(c.value,"g"),i=>`<span class="red">${i}</span>`)}})}catch(s){s!=null&&s.message&&R.error(s.message)}e.loading=!1},y=async(s,a)=>{e.page=s,e.size=a,await u()};return M(c,()=>{e.page=1,e.size=10,u()},{flush:"post"}),T(()=>{u()}),(s,a)=>{const l=d("a-empty"),p=d("RouterLink"),i=d("a-pagination"),k=d("a-spin");return o(),_("div",V,[$,g(k,{spinning:e.loading},{default:m(()=>[n("div",q,[!e.loading&&!e.list.length?(o(),h(l,{key:0,style:{padding:"30px 0"}})):b("",!0),n("div",F,[(o(!0),_(C,null,H(e.list,(t,S)=>(o(),_("div",{class:"item",key:S},[n("div",O,[t.resourceType==="02"?(o(),_("a",{key:0,href:t.resourceContext,target:"_blank",innerHTML:t.title},null,8,U)):(o(),h(p,{key:1,to:`/detail/${t.id}`},{default:m(()=>[n("span",{innerHTML:t.title},null,8,G)]),_:2},1032,["to"]))]),n("div",{class:"desc",innerHTML:t.articleAbstract},null,8,J),n("div",P,I(A(j)(t.publishTime).format("YYYY-MM-DD")),1)]))),128))]),n("div",K,[g(i,{current:e.page,"onUpdate:current":a[0]||(a[0]=t=>e.page=t),pageSize:e.size,"onUpdate:pageSize":a[1]||(a[1]=t=>e.size=t),"show-quick-jumper":"",showSizeChanger:"",hideOnSinglePage:"",total:e.total,onChange:y},null,8,["current","pageSize","total"])])])]),_:1},8,["spinning"])])}}});const te=D(Q,[["__scopeId","data-v-93f08c39"]]);export{te as default};
